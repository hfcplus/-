## 索引类型

### 主键索引

一个表只能有一个主键，主键可以为单列，也可以为多列。单列和多列的每一列都不能为空，单列保证唯一，多列的组合保证唯一

主键的好习惯

>不更新主键的值
>
>不重复使用主键列的值（当一行数据删除时，新增行时不能用原来旧的主键的值）
>
>不使用业务字段来当作主键：1.保密业务字段。2.可以更改业务字段的值

## 索引失效

### 隐式转换可能导致索引失效

隐式转换规则

>1. 两个参数至少有一个是`NULL`时，比较的结果也是`NULL`，特殊的情况是使用`<=>`对两个`NULL`做比较时会返回`1`，这两种情况都不需要做类型转换
>
>   ```mysql
>   select 23 + null; -- null
>   ```
>
>2. 两个参数都是字符串，会按照字符串来比较，不做类型转换
>
>3. 两个参数都是整数，按照整数来比较，不做类型转换
>
>4. 十六进制的值和非数字做比较时，会被当做二进制串
>
>5. 有一个参数是`TIMESTAMP`或`DATETIME`，并且另外一个参数是常量，常量会被转换为`timestamp`
>
>6. 有一个参数是`decimal`类型，如果另外一个参数是`decimal`或者整数，会将整数转换为`decimal`后进行比较，如果另外一个参数是浮点数，则会把`decimal`转换为浮点数进行比较
>
>7. **所有其他情况下，两个参数都会被转换为浮点数再进行比较**
>
>   ```mysql
>   select 1000 + '123';	-- 1123
>   select 1000 + 'a123';	-- 1000
>   select 1000 + '1@';		-- 1001
>   select 1000 + '1.23adf';-- 1001.23
>   ```
>
>   

字符串转浮点数规则

>1. **不以数字开头**的字符串都将转换为`0`。如`'abc'`、`'a123bc'`、`'abc123'`都会转化为`0`；
>2. **以数字开头的**字符串转换时会进行截取，从第一个字符截取到第一个非数字内容为止。比如`'123abc'`会转换为`123`，`'012abc'`会转换为`012`也就是`12`，`'5.3a66b78c'`会转换为`5.3`，其他同理。

```mysql

```

